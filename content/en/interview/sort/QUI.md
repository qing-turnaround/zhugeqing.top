---
date: 2020-10-16T12:00:09+09:00
description: "æˆ˜ç•¥ä¸Šè—è§†æŠ€æœ¯ï¼Œæˆ˜æœ¯ä¸Šé‡è§†æŠ€æœ¯â€”â€”é—ªå®¢"
image: "images/recommend_site/xingyouji.jpg"
title: "å¿«é€Ÿæ’åº"
author: è¯¸è‘›é’
authorEmoji: ğŸ¤–
pinned: true
tags:
- æ’åºç®—æ³•
series:
-   
---

å¿«é€Ÿæ’åºç®—æ³•ç”± C. A. R. Hoare åœ¨ 1960 å¹´æå‡ºã€‚``å®ƒçš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯ O(nlogn)``ï¼Œä½†å®ƒåœ¨æ—¶é—´å¤æ‚åº¦ä¸ºO(nlogn)çº§çš„å‡ ç§æ’åºç®—æ³•ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æ•ˆç‡æ›´é«˜ï¼Œæ‰€ä»¥å¿«é€Ÿæ’åºçš„åº”ç”¨éå¸¸å¹¿æ³›ã€‚å†åŠ ä¸Šå¿«é€Ÿæ’åºæ‰€é‡‡ç”¨çš„åˆ†æ²»æ€æƒ³éå¸¸å®ç”¨ï¼Œä½¿å¾—å¿«é€Ÿæ’åºæ·±å—é¢è¯•å®˜çš„é’çï¼Œ``æ‰€ä»¥æŒæ¡å¿«é€Ÿæ’åºçš„æ€æƒ³å°¤ä¸ºé‡è¦``ã€‚

å¿«é€Ÿæ’åºç®—æ³•çš„<font color=VioletRed size=3 >åŸºæœ¬æ€æƒ³</font>æ˜¯ï¼š

* ``ä»æ•°ç»„ä¸­å–å‡ºä¸€ä¸ªæ•°ï¼Œç§°ä¹‹ä¸ºåŸºæ•°ï¼ˆpivotï¼‰``
* ``éå†æ•°ç»„ï¼Œå°†æ¯”åŸºæ•°å¤§çš„æ•°å­—æ”¾åˆ°å®ƒçš„å³è¾¹ï¼Œæ¯”åŸºæ•°å°çš„æ•°å­—æ”¾åˆ°å®ƒçš„å·¦è¾¹ã€‚éå†å®Œæˆåï¼Œæ•°ç»„è¢«åˆ†æˆäº†å·¦å³ä¸¤ä¸ªåŒºåŸŸ``
* ``å°†å·¦å³ä¸¤ä¸ªåŒºåŸŸè§†ä¸ºä¸¤ä¸ªæ•°ç»„ï¼Œé‡å¤å‰ä¸¤ä¸ªæ­¥éª¤ï¼Œç›´åˆ°æ’åºå®Œæˆ``

<font color=VioletRed size=3 >   </font>

äº‹å®ä¸Šï¼Œå¿«é€Ÿæ’åºçš„``æ¯ä¸€æ¬¡éå†``ï¼Œéƒ½``å°†åŸºæ•°æ‘†åˆ°äº†æœ€ç»ˆä½ç½®ä¸Š``ã€‚ç¬¬ä¸€è½®éå†æ’å¥½ 1 ä¸ªåŸºæ•°ï¼Œç¬¬äºŒè½®éå†æ’å¥½ 2 ä¸ªåŸºæ•°ï¼ˆæ¯ä¸ªåŒºåŸŸä¸€ä¸ªåŸºæ•°ï¼Œä½†å¦‚æœæŸä¸ªåŒºåŸŸä¸ºç©ºï¼Œåˆ™æ­¤è½®åªèƒ½æ’å¥½ä¸€ä¸ªåŸºæ•°ï¼‰ï¼Œç¬¬ä¸‰è½®éå†æ’å¥½ 4 ä¸ªåŸºæ•°ï¼ˆåŒç†ï¼Œæœ€å·®çš„æƒ…å†µä¸‹ï¼Œåªèƒ½æ’å¥½ä¸€ä¸ªåŸºæ•°ï¼‰ï¼Œä»¥æ­¤ç±»æ¨ã€‚``æ€»éå†æ¬¡æ•°ä¸º lognï½n æ¬¡``ï¼Œæ¯è½®éå†çš„æ—¶é—´å¤æ‚åº¦ä¸º``O(n)``ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“åˆ†æå‡ºå¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦ä¸º`` O(nlogn)ï½ O(n^2)``å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º``O(nlogn)``ã€‚

<font color=GreenYellow size=3 >è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¿«é€Ÿæ’åºçš„åŠ¨å›¾å§</font>{{<figure src="/images/sort_gif/QUI.gif">}}

## å¿«é€Ÿæ’åºé€’å½’æ¡†æ¶

æ ¹æ®æˆ‘ä»¬åˆ†æå‡ºçš„æ€è·¯ï¼Œå…ˆæ­å‡ºå¿«é€Ÿæ’åºçš„æ¶å­ï¼š

{{< codes golang java>}}

  {{< code >}}

  ```golang
func quickSort(arr []int) {
    quickSortRecursion(arr, 0, len(arr) - 1);
}
func quickSortRecursion(arr []int, start, end int) {
    // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    middle := partition(arr, start, end);
    // å¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, start, middle - 1);
    // å¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, middle + 1, end);
}
partition(arr []int,start,end int)int{
    // TODO: å°† arr ä» start åˆ° end åˆ†åŒºï¼Œå·¦è¾¹åŒºåŸŸæ¯”åŸºæ•°å°ï¼Œå³è¾¹åŒºåŸŸæ¯”åŸºæ•°å¤§ï¼Œç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡
}
  ```
  {{< /code >}}

  {{< code >}}

  ```java
public static void quickSort(int[] arr) {
    quickSort(arr, 0, arr.length - 1);
}
public static void quickSort(int[] arr, int start, int end) {
    // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    int middle = partition(arr, start, end);
    // å¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, start, middle - 1);
    // å¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, middle + 1, end);
}
public static int partition(int[] arr, int start, int end) {
    // TODO: å°† arr ä» start åˆ° end åˆ†åŒºï¼Œå·¦è¾¹åŒºåŸŸæ¯”åŸºæ•°å°ï¼Œå³è¾¹åŒºåŸŸæ¯”åŸºæ•°å¤§ï¼Œç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡
}
  ```
  {{< /code >}}
{{< /codes >}}

``partition æ„ä¸ºâ€œåˆ’åˆ†â€``ï¼Œæˆ‘ä»¬æœŸæœ› ``partition å‡½æ•°åšçš„äº‹æƒ…æ˜¯``ï¼š``å°† arr ä» start åˆ° end è¿™ä¸€åŒºé—´çš„å€¼åˆ†æˆä¸¤ä¸ªåŒºåŸŸï¼Œå·¦è¾¹åŒºåŸŸçš„æ¯ä¸ªæ•°éƒ½æ¯”åŸºæ•°å°ï¼Œå³è¾¹åŒºåŸŸçš„æ¯ä¸ªæ•°éƒ½æ¯”åŸºæ•°å¤§ï¼Œç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡``ã€‚

åªè¦æœ‰äº†è¿™ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å°±èƒ½å†™å‡ºå¿«é€Ÿæ’åºçš„é€’å½’å‡½æ•°æ¡†æ¶ã€‚é¦–å…ˆè°ƒç”¨ partition å‡½æ•°å¾—åˆ°ä¸­é—´å€¼çš„ä¸‹æ ‡ middleï¼Œç„¶åå¯¹å·¦è¾¹åŒºåŸŸæ‰§è¡Œå¿«é€Ÿæ’åºï¼Œä¹Ÿå°±æ˜¯é€’å½’è°ƒç”¨ quickSort(arr, start, middle - 1)ï¼Œå†å¯¹å³è¾¹åŒºåŸŸæ‰§è¡Œå¿«é€Ÿæ’åºï¼Œä¹Ÿå°±æ˜¯é€’å½’è°ƒç”¨ quickSort(arr, middle + 1, end)ã€‚

ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œ``ä½•æ—¶é€€å‡ºè¿™ä¸ªé€’å½’å‡½æ•°å‘¢ï¼Ÿ``


## é€€å‡ºé€’å½’çš„è¾¹ç•Œæ¡ä»¶

å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œ``å½“æŸä¸ªåŒºåŸŸåªå‰©ä¸‹ä¸€ä¸ªæ•°å­—``çš„æ—¶å€™ï¼Œè‡ªç„¶ä¸éœ€è¦æ’åºäº†ï¼Œæ­¤æ—¶é€€å‡ºé€’å½’å‡½æ•°ã€‚å®é™…ä¸Šè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œå°±æ˜¯``æŸä¸ªåŒºåŸŸåªå‰©ä¸‹ 0 ä¸ªæ•°å­—``æ—¶ï¼Œä¹Ÿéœ€è¦é€€å‡ºé€’å½’å‡½æ•°ã€‚å½“ middle ç­‰äº start æˆ–è€… end æ—¶ï¼Œå°±ä¼šå‡ºç°æŸä¸ªåŒºåŸŸå‰©ä½™æ•°å­—ä¸º 0ã€‚

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼é€€å‡ºé€’å½’å‡½æ•°ï¼š
{{< codes golang java>}}

  {{< code >}}

  ```golang
func quickSortRecurison(arr []int,start,end int){
    middle := partition(arr,start,end)
    if start != middle && start != middle-1{
        quickSortRecurison(arr,start,middle-1)
    } 
    if end != middle && end != middle+1{
        quickSortRecurison(arr,middle+1,end)
    }
}
  ```
  {{< /code >}}

  {{< code >}}

  ```java
public static void quickSort(int[] arr, int start, int end) {
   // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    int middle = partition(arr, start, end);
    // å½“å·¦è¾¹åŒºåŸŸä¸­è‡³å°‘æœ‰ 2 ä¸ªæ•°å­—æ—¶ï¼Œå¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    if (start != middle && start != middle - 1) quickSort(arr, start, middle - 1);
    // å½“å³è¾¹åŒºåŸŸä¸­è‡³å°‘æœ‰ 2 ä¸ªæ•°å­—æ—¶ï¼Œå¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    if (middle != end && middle != end - 1) quickSort(arr, middle + 1, end);
}
  ```
  {{< /code >}}
{{< /codes >}}


åœ¨é€’å½’ä¹‹å‰ï¼Œå…ˆåˆ¤æ–­æ­¤åŒºåŸŸå‰©ä½™æ•°å­—æ˜¯å¦ä¸º 0 ä¸ªæˆ–è€… 1 ä¸ªï¼Œ``å½“æ•°å­—è‡³å°‘ä¸º 2 ä¸ªæ—¶``ï¼Œ``æ‰æ‰§è¡Œè¿™ä¸ªåŒºåŸŸçš„å¿«é€Ÿæ’åº``ã€‚å› ä¸ºæˆ‘ä»¬çŸ¥é“ middle >= start && middle <= end å¿…ç„¶æˆç«‹ï¼Œæ‰€ä»¥åˆ¤æ–­å‰©ä½™åŒºåŸŸçš„æ•°å­—ä¸º 0 ä¸ªæˆ–è€… 1 ä¸ªä¹Ÿå°±æ˜¯æŒ‡ start æˆ– end ä¸ middle ç›¸ç­‰æˆ–ç›¸å·® 1ã€‚

æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹è¿™å››ä¸ªåˆ¤æ–­æ¡ä»¶ï¼š

å½“ ``start == middle`` æ—¶ï¼Œç›¸å½“äº quickSort(arr, start, middle - 1) ä¸­çš„ ``start == end + 1``
å½“ ``start == middle - 1`` æ—¶ï¼Œç›¸å½“äº quickSort(arr, start, middle - 1) ä¸­çš„ ``start == end``
å½“ ``middle == end``æ—¶ï¼Œç›¸å½“äº quickSort(arr, middle + 1, end) ä¸­çš„ ``start == end + 1``
å½“ ``middle == end -1``æ—¶ï¼Œç›¸å½“äº quickSort(arr, middle + 1, end) ä¸­çš„ ``start == end``
ç»¼ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤è¾¹ç•Œæ¡ä»¶ç»Ÿä¸€ç§»åˆ° quickSort å‡½æ•°ä¹‹å‰ï¼š

{{< codes golang java>}}

  {{< code >}}

  ```golang
func quickSortRecurison(arr []int,start,end int){
    if start == end || start = end + 1{
        return 
    }
    middle = partition(arr,start,end)
    quickSortRecurison(arr,start,middle-1)
    qucikSortRecurison(arr,midlle+1,end)
}
  ```
  {{< /code >}}

  {{< code >}}

  ```java
public static void quickSort(int[] arr, int start, int end) {
    // å¦‚æœåŒºåŸŸå†…çš„æ•°å­—å°‘äº 2 ä¸ªï¼Œé€€å‡ºé€’å½’
    if (start == end || start == end + 1) return;
    // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    int middle = partition(arr, start, end);
    // å¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, start, middle - 1);
    // å¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, middle + 1, end);
}
  ```
  {{< /code >}}
{{< /codes >}}

æ›´è¿›ä¸€æ­¥ï¼Œç”±ä¸Šæ–‡æ‰€è¯´çš„ middle >= start && middle <= end å¯ä»¥æ¨å‡ºï¼Œé™¤äº†start == end || start == end + 1è¿™ä¸¤ä¸ªæ¡ä»¶ä¹‹å¤–ï¼Œ``å…¶ä»–çš„æƒ…å†µä¸‹ start éƒ½å°äº end``ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªåˆ¤æ–­æ¡ä»¶å†æ¬¡ç®€å†™ä¸ºï¼š
{{< codes golang java>}}

  {{< code >}}

  ```golang
func quickSortRecurison(arr []int,start,end int){
    if start >= end{
        return 
    }
    middle := partition(arr,start,end)
    quickSortRecurison(arr,start,middle-1)
    quickSortRecursion(arr,midlle+1,end)
}
  ```
  {{< /code >}}

  {{< code >}}

  ```java
public static void quickSort(int[] arr, int start, int end) {
    // å¦‚æœåŒºåŸŸå†…çš„æ•°å­—å°‘äº 2 ä¸ªï¼Œé€€å‡ºé€’å½’
    if (start >= end) return;
    // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    int middle = partition(arr, start, end);
    // å¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, start, middle - 1);
    // å¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, middle + 1, end);
}
  ```
  {{< /code >}}
{{< /codes >}}


è¿™æ ·æˆ‘ä»¬å°±å†™å‡ºäº†æœ€ç®€æ´ç‰ˆçš„è¾¹ç•Œæ¡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œè¿™é‡Œçš„ ``start >= end`` å®é™…ä¸Šåªæœ‰ä¸¤ç§æƒ…å†µï¼š

* ``start == end``: è¡¨æ˜åŒºåŸŸå†…åªæœ‰ä¸€ä¸ªæ•°å­—
* ``start == end + 1``: è¡¨æ˜åŒºåŸŸå†…ä¸€ä¸ªæ•°å­—ä¹Ÿæ²¡æœ‰

ä¸ä¼šå­˜åœ¨ start æ¯” end å¤§ 2 æˆ–è€…å¤§ 3 ä¹‹ç±»çš„ã€‚

## åˆ†åŒºç®—æ³•å®ç°
å¿«é€Ÿæ’åºä¸­æœ€é‡è¦çš„ä¾¿æ˜¯åˆ†åŒºç®—æ³•ï¼Œä¹Ÿå°±æ˜¯ partition å‡½æ•°ã€‚å¤§å¤šæ•°äººéƒ½èƒ½è¯´å‡ºå¿«é€Ÿæ’åºçš„æ•´ä½“æ€è·¯ï¼Œä½†å®ç°èµ·æ¥å´å¾ˆéš¾ä¸€æ¬¡å†™å¯¹ã€‚ä¸»è¦é—®é¢˜å°±åœ¨äºåˆ†åŒºæ—¶å­˜åœ¨çš„å„ç§è¾¹ç•Œæ¡ä»¶ï¼Œéœ€è¦è¯»è€…äº²è‡ªåŠ¨æ‰‹å®è·µæ‰èƒ½åŠ æ·±ä½“ä¼šã€‚

ä¸Šæ–‡å·²ç»è¯´åˆ°ï¼Œpartition å‡½æ•°éœ€è¦åšçš„äº‹æƒ…å°±æ˜¯``å°† arr ä» start åˆ° end åˆ†åŒº``ï¼Œ``å·¦è¾¹åŒºåŸŸæ¯”åŸºæ•°å°``ï¼Œ``å³è¾¹åŒºåŸŸæ¯”åŸºæ•°å¤§``ï¼Œ``ç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡``ã€‚é‚£ä¹ˆé¦–å…ˆæˆ‘ä»¬è¦åšçš„äº‹æƒ…å°±æ˜¯``é€‰æ‹©ä¸€ä¸ªåŸºæ•°``ï¼ŒåŸºæ•°æˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸º ``pivot``ï¼Œæ„ä¸º``â€œè½´â€``ã€‚æ•´ä¸ªæ•°ç»„å°±åƒå›´ç»•è¿™ä¸ªè½´è¿›è¡Œæ—‹è½¬ï¼Œ``å°äºè½´``çš„æ•°å­—``æ—‹è½¬åˆ°å·¦è¾¹``ï¼Œ``å¤§äºè½´``çš„æ•°å­—``æ—‹è½¬åˆ°å³è¾¹``ã€‚

## åŸºæ•°çš„é€‰æ‹©
åŸºæ•°çš„é€‰æ‹©æ²¡æœ‰å›ºå®šæ ‡å‡†ï¼Œéšæ„é€‰æ‹©åŒºé—´å†…ä»»ä½•ä¸€ä¸ªæ•°å­—åšåŸºæ•°éƒ½å¯ä»¥ã€‚é€šå¸¸æ¥è®²æœ‰ä¸‰ç§é€‰æ‹©æ–¹å¼ï¼š

* ``é€‰æ‹©ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºæ•°``
* ``é€‰æ‹©æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºæ•°``
* ``é€‰æ‹©åŒºé—´å†…ä¸€ä¸ªéšæœºå…ƒç´ ä½œä¸ºåŸºæ•°``

é€‰æ‹©çš„åŸºæ•°ä¸åŒï¼Œç®—æ³•çš„å®ç°ä¹Ÿä¸åŒã€‚å®é™…ä¸Š``ç¬¬ä¸‰ç§é€‰æ‹©æ–¹å¼çš„å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯æœ€ä¼˜çš„``ï¼Œå¾…ä¼šåˆ†ææ—¶é—´å¤æ‚åº¦æ—¶æˆ‘ä»¬ä¼šè¯¦ç»†è¯´æ˜ã€‚

æœ¬æ–‡é€šè¿‡ç¬¬ä¸€ç§æ–¹å¼æ¥è®²è§£å¿«é€Ÿæ’åºï¼š

{{< codes golang java>}}

  {{< code >}}

  ```golang
func partition(arr []int,start,end int){
    //å–ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºæ•°
    pivot := arr[start]
    //ä»ç¬¬äºŒä¸ªæ•°å¼€å§‹åˆ†åŒº
    left = start + 1
    //å³è¾¹ç•Œ
    right = end
}
  ```
  {{< /code >}}

  {{< code >}}

  ```java
// å°† arr ä» start åˆ° end åˆ†åŒºï¼Œå·¦è¾¹åŒºåŸŸæ¯”åŸºæ•°å°ï¼Œå³è¾¹åŒºåŸŸæ¯”åŸºæ•°å¤§ï¼Œç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡
public static int partition(int[] arr, int start, int end) {
    // å–ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºæ•°
    int pivot = arr[start];
    // ä»ç¬¬äºŒä¸ªæ•°å¼€å§‹åˆ†åŒº
    int left = start + 1;
    // å³è¾¹ç•Œ
    int right = end;
    // TODO
}
  ```
  {{< /code >}}
{{< /codes >}}

## æœ€ç®€å•çš„åˆ†åŒºç®—æ³•
åˆ†åŒºçš„æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œæœ€ç®€å•çš„æ€è·¯æ˜¯ï¼š``ä» left å¼€å§‹``ï¼Œé‡åˆ°``æ¯”åŸºæ•°å¤§çš„æ•°``ï¼Œå°±``äº¤æ¢åˆ°æ•°ç»„æœ€å``ï¼Œ``å¹¶å°† right å‡ä¸€``ï¼Œ``ç›´åˆ° left å’Œ right ç›¸é‡``ï¼Œæ­¤æ—¶æ•°ç»„å°±è¢«åˆ†æˆäº†å·¦å³ä¸¤ä¸ªåŒºåŸŸã€‚``å†å°†åŸºæ•°å’Œä¸­é—´çš„æ•°äº¤æ¢``ï¼Œ``è¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡``å³å¯ã€‚

æŒ‰ç…§è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬æ•²å‡ºäº†å¦‚ä¸‹ä»£ç ï¼š

{{< codes golang java>}}

  {{< code >}}

  ```golang
func swap(arr []int,i,j int){
    arr[i] = arr[i] ^ arr[j]
    arr[j] = arr[j] ^ arr[i]
    arr[i] = arr[i] ^ arr[j]
}

func quickSort(arr []int){
    quickSortRecursion(arr,0,len(arr)-1)
}

func quickSortRecursion(arr []int,start,end int){
    if start >= end {
        return 
    }
    middle := partition(arr,start,end)
    quickSortRecursion(arr,start,middle-1)
    quickSortRecursion(arr,middle+1,end)
}

func partition(arr []int,start,end int)int{
    pivot := start
    left = start + 1
    right = end
    for left < right{
        for arr[left] <= pivot && left < right{
            left ++
        }
        //leftæ‰¾åˆ°å¤§äºåŸºæ•°çš„æ•°ï¼Œåœä¸‹æ¥
        if left != right{
            swap(arr,left,right)
            right--
        }

    }

    if left == right && arr[right] > pivot{
        right--
    }
    if left != start{
        swap(arr,left,start)
    }

    return right
}
  ```
  {{< /code >}}

  {{< code >}}

  ```java
public static void quickSort(int[] arr) {
    quickSort(arr, 0, arr.length - 1);
}
public static void quickSort(int[] arr, int start, int end) {
    // å¦‚æœåŒºåŸŸå†…çš„æ•°å­—å°‘äº 2 ä¸ªï¼Œé€€å‡ºé€’å½’
    if (start >= end) return;
    // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    int middle = partition(arr, start, end);
    // å¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, start, middle - 1);
    // å¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, middle + 1, end);
}
// å°† arr ä» start åˆ° end åˆ†åŒºï¼Œå·¦è¾¹åŒºåŸŸæ¯”åŸºæ•°å°ï¼Œå³è¾¹åŒºåŸŸæ¯”åŸºæ•°å¤§ï¼Œç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡
public static int partition(int[] arr, int start, int end) {
    // å–ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºæ•°
    int pivot = arr[start];
    // ä»ç¬¬äºŒä¸ªæ•°å¼€å§‹åˆ†åŒº
    int left = start + 1;
    // å³è¾¹ç•Œ
    int right = end;
    // leftã€right ç›¸é‡æ—¶é€€å‡ºå¾ªç¯
    while (left < right) {
        // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºåŸºæ•°çš„ä½ç½®
        while (left < right && arr[left] <= pivot) left++;
        // äº¤æ¢è¿™ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å·¦è¾¹åˆ†åŒºéƒ½å°äºæˆ–ç­‰äºåŸºæ•°ï¼Œå³è¾¹åˆ†åŒºå¤§äºæˆ–ç­‰äºåŸºæ•°
        if (left != right) {
            exchange(arr, left, right);
            right--;
        }
    }
    // å¦‚æœ left å’Œ right ç›¸ç­‰ï¼Œå•ç‹¬æ¯”è¾ƒ arr[right] å’Œ pivot
    if (left == right && arr[right] > pivot) right--;
    // å°†åŸºæ•°å’Œä¸­é—´æ•°äº¤æ¢
    if (right != start) exchange(arr, start, right);
    // è¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡
    return right;
}
private static void exchange(int[] arr, int i, int j) {
    int temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}
  ```
  {{< /code >}}
{{< /codes >}}

å› ä¸ºæˆ‘ä»¬é€‰æ‹©äº†æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºæ•°ï¼Œå¹¶ä¸”åˆ†å®ŒåŒºåï¼Œä¼šæ‰§è¡Œå°†åŸºæ•°å’Œä¸­é—´å€¼äº¤æ¢çš„æ“ä½œï¼Œè¿™å°±æ„å‘³ç€äº¤æ¢åçš„ä¸­é—´å€¼ä¼šè¢«åˆ†åˆ°å·¦è¾¹åŒºåŸŸã€‚æ‰€ä»¥æˆ‘ä»¬``éœ€è¦ä¿è¯ä¸­é—´å€¼çš„ä¸‹æ ‡æ˜¯åˆ†åŒºå®Œæˆåï¼Œæœ€åä¸€ä¸ªæ¯”åŸºæ•°å°çš„å€¼``ï¼Œè¿™é‡Œæˆ‘ä»¬ç”¨ right æ¥è®°å½•è¿™ä¸ªå€¼ã€‚

è¿™æ®µä»£ç æœ‰ä¸€ä¸ªç»†èŠ‚ã€‚é¦–å…ˆï¼Œåœ¨äº¤æ¢ left å’Œ right ä¹‹å‰ï¼Œæˆ‘ä»¬åˆ¤æ–­äº† left != rightï¼Œè¿™æ˜¯å› ä¸ºå¦‚æœå‰©ä½™çš„æ•°ç»„éƒ½æ¯”åŸºæ•°å°ï¼Œåˆ™ left ä¼šåŠ åˆ° right æ‰åœæ­¢ï¼Œè¿™æ—¶ä¸åº”è¯¥å‘ç”Ÿäº¤æ¢ã€‚å› ä¸º right å·²ç»æŒ‡å‘äº†æœ€åä¸€ä¸ªæ¯”åŸºæ•°å°çš„å€¼ã€‚

ä½†è¿™é‡Œçš„æ‹¦æˆªå¯èƒ½ä¼šæ‹¦æˆªåˆ°ä¸€ç§é”™è¯¯æƒ…å†µï¼Œå¦‚æœå‰©ä½™çš„æ•°ç»„åªæœ‰æœ€åä¸€ä¸ªæ•°æ¯”åŸºæ•°å¤§ï¼Œleft ä»ç„¶åŠ åˆ° right åœæ­¢äº†ï¼Œä½†æˆ‘ä»¬å¹¶æ²¡æœ‰å‘ç”Ÿäº¤æ¢ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨é€€å‡ºå¾ªç¯åï¼Œ``å•ç‹¬æ¯”è¾ƒäº† arr[right] å’Œ pivot``ã€‚

å®é™…ä¸Šï¼Œè¿™è¡Œå•ç‹¬æ¯”è¾ƒçš„ä»£ç éå¸¸å·§å¦™ï¼Œä¸€å…±å¤„ç†äº†ä¸‰ç§æƒ…å†µï¼š

* ``ä¸€æ˜¯åˆšæ‰æåˆ°çš„å‰©ä½™æ•°ç»„ä¸­åªæœ‰æœ€åä¸€ä¸ªæ•°æ¯”åŸºæ•°å¤§çš„æƒ…å†µ``
* ``äºŒæ˜¯ left å’Œ right åŒºé—´å†…åªæœ‰ä¸€ä¸ªå€¼ï¼Œåˆ™åˆå§‹çŠ¶æ€ä¸‹ï¼Œ left == rightï¼Œæ‰€ä»¥ while (left < right) æ ¹æœ¬ä¸ä¼šè¿›å…¥ï¼Œæ‰€ä»¥æ­¤æ—¶æˆ‘ä»¬å•ç‹¬æ¯”è¾ƒè¿™ä¸ªå€¼å’ŒåŸºæ•°çš„å¤§å°å…³ç³»``
* ``ä¸‰æ˜¯å‰©ä½™æ•°ç»„ä¸­æ¯ä¸ªæ•°éƒ½æ¯”åŸºæ•°å¤§ï¼Œæ­¤æ—¶ right ä¼šæŒç»­å‡å°ï¼Œç›´åˆ°å’Œ left ç›¸ç­‰é€€å‡ºå¾ªç¯ï¼Œæ­¤æ—¶ left æ‰€åœ¨ä½ç½®çš„å€¼è¿˜æ²¡æœ‰å’Œ pivot è¿›è¡Œæ¯”è¾ƒï¼Œæ‰€ä»¥æˆ‘ä»¬å•ç‹¬æ¯”è¾ƒ left æ‰€åœ¨ä½ç½®çš„å€¼å’ŒåŸºæ•°çš„å¤§å°å…³ç³»``

## åŒæŒ‡é’ˆåˆ†åŒºç®—æ³•
é™¤äº†ä¸Šè¿°çš„åˆ†åŒºç®—æ³•å¤–ï¼Œ``è¿˜æœ‰ä¸€ç§åŒæŒ‡é’ˆçš„åˆ†åŒºç®—æ³•æ›´ä¸ºå¸¸ç”¨``ï¼šä» left å¼€å§‹ï¼Œé‡åˆ°æ¯”åŸºæ•°å¤§çš„æ•°ï¼Œè®°å½•å…¶ä¸‹æ ‡ï¼›å†ä» right å¾€å‰éå†ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ¯”åŸºæ•°å°çš„æ•°ï¼Œè®°å½•å…¶ä¸‹æ ‡ï¼›``ç„¶åäº¤æ¢è¿™ä¸¤ä¸ªæ•°``ã€‚ç»§ç»­éå†ï¼Œç›´åˆ° left å’Œ right ç›¸é‡ã€‚ç„¶åå°±å’Œåˆšæ‰çš„ç®—æ³•ä¸€æ ·äº†ï¼Œ``äº¤æ¢åŸºæ•°å’Œä¸­é—´å€¼``ï¼Œ``å¹¶è¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡``ã€‚

ä»£ç å¦‚ä¸‹ï¼š

{{< codes golang java>}}

  {{< code >}}

  ```golang
func quickSort(arr []int){

	quickSortRescursion(arr,0,len(arr)-1)

}

func quickSortRescursion(arr []int,start,end int){
	if start >= end {
		return 
	}
	//æ±‚åˆ†åŒºä¸­è½´ï¼ŒæŠŠæ•°ç»„åˆ†åŒº
	middle := partition(arr,start,end)
	//å‘å·¦åˆ†åŒºé€’å½’ï¼Œå¯¹å·¦åˆ†åŒºè¿›è¡Œæ’åº
	quickSortRescursion(arr,start,middle-1)
	//å‘å³åˆ†åŒºé€’å½’ï¼Œå¯¹å³åˆ†åŒºè¿›è¡Œæ’åº
	quickSortRescursion(arr,middle+1,end)
} 

func partition(arr []int,start,end int)int{
	//åŸºæ•°
	pivot := arr[start]
    left := start+1
	right := end

	for left < right{
		for left < right && arr[left] <= pivot{
			left++
		}
		for left < right && arr[right] >= pivot{
			right--
		} 

		if left < right{
			swap(arr,left,right)
			left++
			right--
		}
	}
      // å¦‚æœ left å’Œ right ç›¸ç­‰ï¼Œå•ç‹¬æ¯”è¾ƒ arr[right] å’Œ pivot
    if left == right && arr[right] > pivot{
		right--
	}
	// å°†åŸºæ•°å’Œè½´äº¤æ¢
    if right != start{
	swap(arr,right,start)
	}
	return right
}

  ```
  {{< /code >}}

  {{< code >}}

  ```java
public static void quickSort(int[] arr) {
    quickSort(arr, 0, arr.length - 1);
}
public static void quickSort(int[] arr, int start, int end) {
    // å¦‚æœåŒºåŸŸå†…çš„æ•°å­—å°‘äº 2 ä¸ªï¼Œé€€å‡ºé€’å½’
    if (start >= end) return;
    // å°†æ•°ç»„åˆ†åŒºï¼Œå¹¶è·å¾—ä¸­é—´å€¼çš„ä¸‹æ ‡
    int middle = partition(arr, start, end);
    // å¯¹å·¦è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, start, middle - 1);
    // å¯¹å³è¾¹åŒºåŸŸå¿«é€Ÿæ’åº
    quickSort(arr, middle + 1, end);
}
// å°† arr ä» start åˆ° end åˆ†åŒºï¼Œå·¦è¾¹åŒºåŸŸæ¯”åŸºæ•°å°ï¼Œå³è¾¹åŒºåŸŸæ¯”åŸºæ•°å¤§ï¼Œç„¶åè¿”å›ä¸­é—´å€¼çš„ä¸‹æ ‡
public static int partition(int[] arr, int start, int end) {
    // å–ç¬¬ä¸€ä¸ªæ•°ä¸ºåŸºæ•°
    int pivot = arr[start];
    // ä»ç¬¬äºŒä¸ªæ•°å¼€å§‹åˆ†åŒº
    int left = start + 1;
    // å³è¾¹ç•Œ
    int right = end;
    while (left < right) {
        // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äºåŸºæ•°çš„ä½ç½®
        while (left < right && arr[left] <= pivot) left++;
        // æ‰¾åˆ°ç¬¬ä¸€ä¸ªå°äºåŸºæ•°çš„ä½ç½®
        while (left < right && arr[right] >= pivot) right--;
        // äº¤æ¢è¿™ä¸¤ä¸ªæ•°ï¼Œä½¿å¾—å·¦è¾¹åˆ†åŒºéƒ½å°äºæˆ–ç­‰äºåŸºæ•°ï¼Œå³è¾¹åˆ†åŒºå¤§äºæˆ–ç­‰äºåŸºæ•°
        if (left < right) {
            exchange(arr, left, right);
            left++;
            right--;
        }
    }
    // å¦‚æœ left å’Œ right ç›¸ç­‰ï¼Œå•ç‹¬æ¯”è¾ƒ arr[right] å’Œ pivot
    if (left == right && arr[right] > pivot) right--;
    // å°†åŸºæ•°å’Œè½´äº¤æ¢
    exchange(arr, start, right);
    return right;
}
private static void exchange(int[] arr, int i, int j) {
    int temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
}
  ```
  {{< /code >}}
{{< /codes >}}

åŒæ ·åœ°ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é€€å‡ºå¾ªç¯åï¼Œå•ç‹¬æ¯”è¾ƒ left å’Œ right çš„å€¼ã€‚

## æ—¶é—´å¤æ‚åº¦ & ç©ºé—´å¤æ‚åº¦

å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º``O(nlogn)``ï¼Œæœ€åçš„æ—¶é—´å¤æ‚åº¦ä¸º``O(n^2)``ï¼Œç©ºé—´å¤æ‚åº¦ä¸é€’å½’çš„å±‚æ•°æœ‰å…³ï¼Œæ¯å±‚é€’å½’ä¼šç”Ÿæˆä¸€äº›ä¸´æ—¶å˜é‡ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦ä¸º ``O(logn)~ O(n)``ï¼Œå¹³å‡ç©ºé—´å¤æ‚åº¦ä¸º``O(logn)``

ä¸ºä»€ä¹ˆè¯´éšæœºé€‰æ‹©å‰©ä½™æ•°ç»„ä¸­çš„ä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºæ•°çš„æ–¹æ¡ˆå¹³å‡å¤æ‚åº¦æ˜¯æœ€ä¼˜çš„å‘¢ï¼Ÿä»€ä¹ˆæƒ…å†µä¸‹å¿«é€Ÿæ’åºç®—æ³•çš„æ—¶é—´å¤æ‚åº¦æœ€é«˜ï¼Œä¸€å…±æœ‰ä¸¤ç§æƒ…å†µã€‚
* ``æ•°ç»„ä¸ºæ­£åº``
* ``æ•°ç»„ä¸ºé€†åº``

ç†æƒ³ä¸­çš„å¿«é€Ÿæ’åºåœ¨ç¬¬ k è½®éå†ä¸­ï¼Œå¯ä»¥æ’å¥½ 2^(k-1)ä¸ªåŸºæ•°ã€‚ä½†ä»å›¾ä¸­æˆ‘ä»¬å‘ç°ï¼Œå½“æ•°ç»„åŸæœ¬ä¸ºæ­£åºæˆ–é€†åºæ—¶ï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªæ•°ä½œä¸ºåŸºæ•°çš„è¯ï¼Œæ¯è½®åˆ†åŒºåï¼Œéƒ½æœ‰ä¸€ä¸ªåŒºåŸŸæ˜¯ç©ºçš„ï¼Œä¹Ÿå°±æ˜¯è¯´æ•°ç»„ä¸­å‰©ä¸‹çš„æ•°å­—éƒ½è¢«åˆ†åˆ°äº†åŒä¸€ä¸ªåŒºåŸŸï¼è¿™å°±å¯¼è‡´äº†æ¯ä¸€è½®éå†åªèƒ½æ’å¥½ä¸€ä¸ªåŸºæ•°ã€‚æ‰€ä»¥æ€»çš„æ¯”è¾ƒæ¬¡æ•°ä¸º (n - 1) + (n - 2) + (n - 3) + ... + 1 æ¬¡ï¼Œç”±ç­‰å·®æ•°åˆ—æ±‚å’Œå…¬å¼å¯ä»¥è®¡ç®—å‡ºæ€»çš„æ¯”è¾ƒæ¬¡æ•°ä¸º n(n - 1)/2 æ¬¡ï¼Œæ­¤æ—¶å¿«é€Ÿæ’åºçš„æ—¶é—´å¤æ‚åº¦è¾¾åˆ°äº† O(n^2)çº§ã€‚

## ç¨³å®šæ€§
ä»ä»£ç å®ç°ä¸­å¯ä»¥åˆ†æå‡ºï¼Œ``å¿«é€Ÿæ’åºæ˜¯ä¸€ç§ä¸ç¨³å®šçš„æ’åºç®—æ³•``ï¼Œåœ¨åˆ†åŒºè¿‡ç¨‹ä¸­ï¼Œ``ç›¸åŒæ•°å­—çš„ç›¸å¯¹é¡ºåºå¯èƒ½ä¼šè¢«ä¿®æ”¹``ã€‚


## å¿«é€Ÿæ’åºçš„ä¼˜åŒ–æ€è·¯

* 1.æ¯è½®é€‰æ‹©åŸºæ•°æ—¶ï¼Œä»å‰©ä½™çš„æ•°ç»„ä¸­``éšæœºé€‰æ‹©ä¸€ä¸ªæ•°å­—ä½œä¸ºåŸºæ•°``ã€‚è¿™æ ·æ¯è½®éƒ½é€‰åˆ°æœ€å¤§æˆ–æœ€å°å€¼çš„æ¦‚ç‡å°±ä¼šå˜å¾—å¾ˆä½äº†ã€‚æ‰€ä»¥æˆ‘ä»¬æ‰è¯´ç”¨è¿™ç§æ–¹å¼é€‰æ‹©åŸºæ•°ï¼Œå…¶å¹³å‡æ—¶é—´å¤æ‚åº¦æ˜¯æœ€ä¼˜çš„
* 2.``ä¸‰æ•°å–ä¸­``ï¼Œå¾…æ’åºåºåˆ—ä¸­lowã€midã€highä¸‰ä¸ªä½ç½®ä¸Šæ•°æ®è¿›è¡Œæ’åºï¼Œå–ä»–ä»¬ä¸­é—´çš„é‚£ä¸ªæ•°æ®ä½œä¸ºæ¢è½´ï¼Œå¹¶ç”¨0ä¸‹æ ‡å…ƒç´ å­˜å‚¨æ¢è½´ã€‚
