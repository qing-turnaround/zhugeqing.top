---
date: 2020-12-13
description: "å¦‚æœè¯´æ•°å­¦æ˜¯çš‡å† ä¸Šçš„ä¸€é¢—æ˜ç ï¼Œé‚£ä¹ˆç®—æ³•å°±æ˜¯è¿™é¢—æ˜ç ä¸Šçš„å…‰èŠ’ï¼Œç®—æ³•è®©è¿™é¢—æ˜ç æ›´åŠ ç† ç† ç”Ÿè¾‰ï¼Œä¸ºç§‘æŠ€è¿›æ­¥å’Œç¤¾ä¼šå‘å±•ç…§äº®äº†å‰è¿›çš„è·¯"
image: "images/recommend_site/xingyouji.jpg"
title: "å‰‘æŒ‡ Offer 51. æ•°ç»„ä¸­çš„é€†åºå¯¹"
author: è¯¸è‘›é’
authorEmoji: ğŸ…
pinned: false
tags:
- ç®—æ³•
series:
-  
---
[é¢˜ç›®å…¥å£](https://leetcode-cn.com/problems/shu-zu-zhong-de-ni-xu-dui-lcof/)

<font color=CadetBlue size=3 >éš¾åº¦ï¼šå›°éš¾</font>

<font color=MediumTurquoise>è§£é¢˜æ€è·¯ï¼š
å½’å¹¶æ’åº</font>

```golang
// ä½¿ç”¨å½’å¹¶æ’åºç»Ÿè®¡
func reversePairs(nums []int) int {
    res := make([]int,len(nums))
    return mergeSort(nums,0,len(res)-1,res)
}

func mergeSort(nums []int,start,end int,res []int)int{
    if start >= end{
        return 0
    }
    middle := (start+end)/2
    //å‘å·¦åŒºé—´é€’å½’
    left := mergeSort(nums,start,middle,res)
    //å‘å³åŒºé—´é€’å½’
    right := mergeSort(nums,middle+1,end,res)

    return left + right + merge(nums,start,end,res)
    
}

func merge(nums []int,start,end int,res []int)int{
    end1 := (start+end)/2
    start2 := end1 + 1
    //è®°å½•é€†åºå¯¹
    count := 0
    //éå†æŒ‡é’ˆ
    index1,index2 := start,start2
    for index1 <= end1 && index2 <= end{
        if nums[index1] <= nums[index2]{
            res[index1+index2-start2] = nums[index1]
            index1++
        }else{
            res[index1+index2-start2] = nums[index2]
            index2++
            //æ­¤æ—¶å³è¾¹çš„æ•°å°äºå·¦è¾¹çš„æ•°ï¼Œè®°å½•é€†åºå¯¹
            count += end1 - index1 + 1 
        }
    }
    //è¡¥å…¨å‰©ä½™çš„æ•°å­—
    for index1 <= end1{
        res[index1+index2-start2] = nums[index1]
        index1++
    }

    for index2 <= end{
        res[index1+index2-start2] = nums[index2]
        index2++
    }

    for start<=end{
        nums[start] = res[start]
        start++
    }
    return count
}
```