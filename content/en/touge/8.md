---
date: 1970-01-01
description: "çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ"
image: "images/recommend_site/xingyouji.jpg"
title: "UDP Pingç¨‹åºå®ç°"
author: è¯¸è‘›é’
authorEmoji: ğŸ˜ƒ
pinned: false
tags:
- 
series:
-
---

## ç¬¬ä¸€å…³
```Python
# UDPPingerServer.py 
from socket import * 

########## Begin ##########

# åˆ›å»ºUDPå¥—æ¥å­—
serverSocket = socket(AF_INET, SOCK_DGRAM)
# ç»‘å®šæœ¬æœºIPåœ°å€å’Œç«¯å£å·
serverSocket.bind(('', 12000))

########## End ##########
# è¾“å‡ºsocketä¿¡æ¯
print( serverSocket)
```

## ç¬¬äºŒå…³
```Python
from socket import *

# åˆ›å»ºUDPå¥—æ¥å­—
serverSocket = socket(AF_INET, SOCK_DGRAM)
# ç»‘å®šæœ¬æœºIPåœ°å€å’Œç«¯å£å·
serverSocket.bind(('', 12000))

########## Begin ##########
# æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯
message, address = serverSocket.recvfrom(1024)
# å°†æ•°æ®åŒ…æ¶ˆæ¯è½¬æ¢ä¸ºå¤§å†™
message = message.upper()
#å°†æ¶ˆæ¯ä¼ å›ç»™å®¢æˆ·ç«¯
serverSocket.sendto(message, address)
########## End ##########
```

## ç¬¬ä¸‰å…³
```Python
from socket import *
import random

# åˆ›å»ºUDPå¥—æ¥å­—
serverSocket = socket(AF_INET, SOCK_DGRAM)
# ç»‘å®šæœ¬æœºIPåœ°å€å’Œç«¯å£å·
serverSocket.bind(('', 12000))

num=0
while True:
        
    
    # æ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯
    message, address = serverSocket.recvfrom(1024)
    # å°†æ•°æ®åŒ…æ¶ˆæ¯è½¬æ¢ä¸ºå¤§å†™
    message = message.upper()
        
    num=num+1
    if num>=8:
        break

    ########## Begin ##########
    # å¯¹æ¶ˆæ¯è®¡æ•°å™¨æ¨¡ 3 ä¸º 1 çš„æ¶ˆæ¯ä¸¢åŒ…
    if num % 3 == 1:
        continue
    ########## End ##########
    
    #å°†æ¶ˆæ¯ä¼ å›ç»™å®¢æˆ·ç«¯
    serverSocket.sendto(message, address)
```

## ç¬¬å››å…³
```Python
from socket import *

########## Begin ##########
# åˆ›å»ºUDPå¥—æ¥å­—ï¼Œä½¿ç”¨IPv4åè®®
clientSocket = socket(AF_INET, SOCK_DGRAM) 
# è®¾ç½®å¥—æ¥å­—è¶…æ—¶å€¼1ç§’
clientSocket.settimeout(1)
########## End ##########

print(clientSocket)
print(clientSocket.gettimeout())
```

## ç¬¬äº”å…³
```Python
from socket import *
import time

serverName = '127.0.0.1' # æœåŠ¡å™¨åœ°å€ï¼Œæœ¬ä¾‹ä¸­ä½¿ç”¨æœ¬æœºåœ°å€
serverPort = 12000 # æœåŠ¡å™¨æŒ‡å®šçš„ç«¯å£
clientSocket = socket(AF_INET, SOCK_DGRAM) # åˆ›å»ºUDPå¥—æ¥å­—ï¼Œä½¿ç”¨IPv4åè®®
clientSocket.settimeout(1) # è®¾ç½®å¥—æ¥å­—è¶…æ—¶å€¼1ç§’

for i in range(0, 9):
    sendTime = time.time()
    message = ('Ping %d %s' % (i+1, sendTime)).encode()     # ç”Ÿæˆæ•°æ®æŠ¥ï¼Œç¼–ç ä¸ºbytesä»¥ä¾¿å‘é€

    try:
        ########## Begin ##########
        # å°†ä¿¡æ¯å‘é€åˆ°æœåŠ¡å™¨
        clientSocket.sendto(message, (serverName, serverPort))
        # ä»æœåŠ¡å™¨æ¥æ”¶ä¿¡æ¯ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¾—åˆ°æœåŠ¡å™¨åœ°å€ï¼ˆBUFSIZEä¸º1024ï¼‰
        modifiedMessage, serverAddress = clientSocket.recvfrom(1024) 
        ########## End ##########
        rtt = time.time() - sendTime # è®¡ç®—å¾€è¿”æ—¶é—´

        print('Sequence %d: Reply from %s    RTT = %.3fs' % (i+1, serverName, rtt)) # æ˜¾ç¤ºä¿¡æ¯
    except Exception as e:
        print('Sequence %d: Request timed out.' % (i+1))

clientSocket.close() # å…³é—­å¥—æ¥å­—
```